Reading STATA

```r
install.packages("foreign")
library(foreign)
```

Import data as data frame

```r
# Load the foreign package
> library(foreign)
> 
> # Import florida.dta and name the resulting data frame florida
> florida <- read.dta("florida.dta")
> 
> # Check tail() of florida
> tail(florida)
    gore  bush buchanan nader  total
62  2647  4051       27    59   6784
63  1399  2326       26    29   3780
64 97063 82214      396  2436 182109
65  3835  4511       46   149   8541
66  5637 12176      120   265  18198
67  2796  4983       88    93   7960
>
```

```r
> # foreign is already loaded
> 
> # Specify the file path using file.path(): path
> path <- file.path("worldbank/edequality.dta")
> 
> # Create and print structure of edu_equal_1
> edu_equal_1 <- read.dta(path)
> str(edu_equal_1)
'data.frame':    12214 obs. of  27 variables:
 $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
 $ hhweight          : num  627 627 627 627 627 ...
 $ location          : Factor w/ 2 levels "urban location",..: 1 1 1 1 1 2 2 2 1 1 ...
 $ region            : Factor w/ 9 levels "Sofia city","Bourgass",..: 8 8 8 9 9 4 4 4 8 8 ...
 $ ethnicity_head    : Factor w/ 4 levels "Bulgaria","Turks",..: 2 2 2 1 1 1 1 1 1 1 ...
 $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
 $ gender            : Factor w/ 2 levels "male","female": 2 2 1 1 2 1 1 2 2 2 ...
 $ relation          : Factor w/ 9 levels "head                      ",..: 1 3 3 1 2 1 1 2 1 1 ...
 $ literate          : Factor w/ 2 levels "no","yes": 1 2 2 2 2 2 2 2 2 2 ...
 $ income_mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
 $ income            : num  160 160 160 1710 1710 ...
 $ aggregate         : num  1042 1042 1042 3271 3271 ...
 $ aggr_ind_annual   : num  347 347 347 1635 1635 ...
 $ educ_completed    : int  2 4 4 4 3 3 3 3 4 4 ...
 $ grade_complete    : num  4 3 0 3 4 4 4 4 5 5 ...
 $ grade_all         : num  4 11 8 11 8 8 8 8 13 13 ...
 $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
 $ reason_OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
 $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
 $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
 $ earn_mont         : num  0 0 0 0 0 0 20 20 0 0 ...
 $ earn_ann          : num  0 0 0 0 0 0 240 240 0 0 ...
 $ hours_week        : num  NA NA NA NA NA NA 30 35 NA NA ...
 $ hours_mnt         : num  NA NA NA NA NA ...
 $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
 $ hhexp             : num  100 100 100 343 343 ...
 $ legacy_pension_amt: num  NA NA NA NA NA NA NA NA NA NA ...
 - attr(*, "datalabel")= chr ""
 - attr(*, "time.stamp")= chr ""
 - attr(*, "formats")= chr  "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
 - attr(*, "types")= int  100 100 108 108 108 100 108 108 108 100 ...
 - attr(*, "val.labels")= chr  "" "" "location" "region" ...
 - attr(*, "var.labels")= chr  "hhid" "hhweight" "location" "region" ...
 - attr(*, "expansion.fields")=List of 12
  ..$ : chr  "_dta" "_svy_su1" "cluster"
  ..$ : chr  "_dta" "_svy_strata1" "strata"
  ..$ : chr  "_dta" "_svy_stages" "1"
  ..$ : chr  "_dta" "_svy_version" "2"
  ..$ : chr  "_dta" "__XijVarLabcons" "(sum) cons"
  ..$ : chr  "_dta" "ReS_Xij" "cons"
  ..$ : chr  "_dta" "ReS_str" "0"
  ..$ : chr  "_dta" "ReS_j" "group"
  ..$ : chr  "_dta" "ReS_ver" "v.2"
  ..$ : chr  "_dta" "ReS_i" "hhid dur"
  ..$ : chr  "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
  ..$ : chr  "_dta" "note0" "1"
 - attr(*, "version")= int 7
 - attr(*, "label.table")=List of 12
  ..$ location: Named int  1 2
  .. ..- attr(*, "names")= chr  "urban location" "rural location"
  ..$ region  : Named int  1 2 3 4 5 6 7 8 9
  .. ..- attr(*, "names")= chr  "Sofia city" "Bourgass" "Varna" "Lovetch" ...
  ..$ ethnic  : Named int  1 2 3 4
  .. ..- attr(*, "names")= chr  "Bulgaria" "Turks" "Roma" "Other"
  ..$ s2_q2   : Named int  1 2
  .. ..- attr(*, "names")= chr  "male" "female"
  ..$ s2_q3   : Named int  1 2 3 4 5 6 7 8 9
  .. ..- attr(*, "names")= chr  "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
  ..$ lit     : Named int  1 2
  .. ..- attr(*, "names")= chr  "no" "yes"
  ..$         : Named int  1 2 3 4
  .. ..- attr(*, "names")= chr  "never attanded" "primary" "secondary" "postsecondary"
  ..$         : Named int  1 2
  .. ..- attr(*, "names")= chr  "Not unemployed" "Unemployed"
  ..$         : Named int  1 2 3 4 5 6 7 8 9 10
  .. ..- attr(*, "names")= chr  "student" "housewife/childcare" "in retirement" "illness, disability" ...
  ..$         : Named int  1 2 3 4 5 6 7 8 9 10
  .. ..- attr(*, "names")= chr  "agriculture" "mining" "manufacturing" "utilities" ...
  ..$         : Named int  1 2 3 4 5
  .. ..- attr(*, "names")= chr  "private company" "public works program" "government,public sector, army" "private individual" ...
  ..$         : Named int  1 2
  .. ..- attr(*, "names")= chr  "no" "yes"
> 
> 
> # Create and print structure of edu_equal_2
> edu_equal_2 <- read.dta(path, convert.factors = FALSE)
> str(edu_equal_2)
'data.frame':    12214 obs. of  27 variables:
 $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
 $ hhweight          : num  627 627 627 627 627 ...
 $ location          : int  1 1 1 1 1 2 2 2 1 1 ...
 $ region            : int  8 8 8 9 9 4 4 4 8 8 ...
 $ ethnicity_head    : int  2 2 2 1 1 1 1 1 1 1 ...
 $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
 $ gender            : int  2 2 1 1 2 1 1 2 2 2 ...
 $ relation          : int  1 3 3 1 2 1 1 2 1 1 ...
 $ literate          : int  1 2 2 2 2 2 2 2 2 2 ...
 $ income_mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
 $ income            : num  160 160 160 1710 1710 ...
 $ aggregate         : num  1042 1042 1042 3271 3271 ...
 $ aggr_ind_annual   : num  347 347 347 1635 1635 ...
 $ educ_completed    : int  2 4 4 4 3 3 3 3 4 4 ...
 $ grade_complete    : num  4 3 0 3 4 4 4 4 5 5 ...
 $ grade_all         : num  4 11 8 11 8 8 8 8 13 13 ...
 $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
 $ reason_OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
 $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
 $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
 $ earn_mont         : num  0 0 0 0 0 0 20 20 0 0 ...
 $ earn_ann          : num  0 0 0 0 0 0 240 240 0 0 ...
 $ hours_week        : num  NA NA NA NA NA NA 30 35 NA NA ...
 $ hours_mnt         : num  NA NA NA NA NA ...
 $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
 $ hhexp             : num  100 100 100 343 343 ...
 $ legacy_pension_amt: num  NA NA NA NA NA NA NA NA NA NA ...
 - attr(*, "datalabel")= chr ""
 - attr(*, "time.stamp")= chr ""
 - attr(*, "formats")= chr  "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
 - attr(*, "types")= int  100 100 108 108 108 100 108 108 108 100 ...
 - attr(*, "val.labels")= chr  "" "" "location" "region" ...
 - attr(*, "var.labels")= chr  "hhid" "hhweight" "location" "region" ...
 - attr(*, "expansion.fields")=List of 12
  ..$ : chr  "_dta" "_svy_su1" "cluster"
  ..$ : chr  "_dta" "_svy_strata1" "strata"
  ..$ : chr  "_dta" "_svy_stages" "1"
  ..$ : chr  "_dta" "_svy_version" "2"
  ..$ : chr  "_dta" "__XijVarLabcons" "(sum) cons"
  ..$ : chr  "_dta" "ReS_Xij" "cons"
  ..$ : chr  "_dta" "ReS_str" "0"
  ..$ : chr  "_dta" "ReS_j" "group"
  ..$ : chr  "_dta" "ReS_ver" "v.2"
  ..$ : chr  "_dta" "ReS_i" "hhid dur"
  ..$ : chr  "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
  ..$ : chr  "_dta" "note0" "1"
 - attr(*, "version")= int 7
 - attr(*, "label.table")=List of 12
  ..$ location: Named int  1 2
  .. ..- attr(*, "names")= chr  "urban location" "rural location"
  ..$ region  : Named int  1 2 3 4 5 6 7 8 9
  .. ..- attr(*, "names")= chr  "Sofia city" "Bourgass" "Varna" "Lovetch" ...
  ..$ ethnic  : Named int  1 2 3 4
  .. ..- attr(*, "names")= chr  "Bulgaria" "Turks" "Roma" "Other"
  ..$ s2_q2   : Named int  1 2
  .. ..- attr(*, "names")= chr  "male" "female"
  ..$ s2_q3   : Named int  1 2 3 4 5 6 7 8 9
  .. ..- attr(*, "names")= chr  "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
  ..$ lit     : Named int  1 2
  .. ..- attr(*, "names")= chr  "no" "yes"
  ..$         : Named int  1 2 3 4
  .. ..- attr(*, "names")= chr  "never attanded" "primary" "secondary" "postsecondary"
  ..$         : Named int  1 2
  .. ..- attr(*, "names")= chr  "Not unemployed" "Unemployed"
  ..$         : Named int  1 2 3 4 5 6 7 8 9 10
  .. ..- attr(*, "names")= chr  "student" "housewife/childcare" "in retirement" "illness, disability" ...
  ..$         : Named int  1 2 3 4 5 6 7 8 9 10
  .. ..- attr(*, "names")= chr  "agriculture" "mining" "manufacturing" "utilities" ...
  ..$         : Named int  1 2 3 4 5
  .. ..- attr(*, "names")= chr  "private company" "public works program" "government,public sector, army" "private individual" ...
  ..$         : Named int  1 2
  .. ..- attr(*, "names")= chr  "no" "yes"
> 
> # Create and print structure of edu_equal_3
> edu_equal_3 <- read.dta(path, convert.underscore = TRUE)
> str(edu_equal_3)
'data.frame':    12214 obs. of  27 variables:
 $ hhid              : num  1 1 1 2 2 3 4 4 5 6 ...
 $ hhweight          : num  627 627 627 627 627 ...
 $ location          : Factor w/ 2 levels "urban location",..: 1 1 1 1 1 2 2 2 1 1 ...
 $ region            : Factor w/ 9 levels "Sofia city","Bourgass",..: 8 8 8 9 9 4 4 4 8 8 ...
 $ ethnicity.head    : Factor w/ 4 levels "Bulgaria","Turks",..: 2 2 2 1 1 1 1 1 1 1 ...
 $ age               : num  37 11 8 73 70 75 79 80 82 83 ...
 $ gender            : Factor w/ 2 levels "male","female": 2 2 1 1 2 1 1 2 2 2 ...
 $ relation          : Factor w/ 9 levels "head                      ",..: 1 3 3 1 2 1 1 2 1 1 ...
 $ literate          : Factor w/ 2 levels "no","yes": 1 2 2 2 2 2 2 2 2 2 ...
 $ income.mnt        : num  13.3 13.3 13.3 142.5 142.5 ...
 $ income            : num  160 160 160 1710 1710 ...
 $ aggregate         : num  1042 1042 1042 3271 3271 ...
 $ aggr.ind.annual   : num  347 347 347 1635 1635 ...
 $ educ.completed    : int  2 4 4 4 3 3 3 3 4 4 ...
 $ grade.complete    : num  4 3 0 3 4 4 4 4 5 5 ...
 $ grade.all         : num  4 11 8 11 8 8 8 8 13 13 ...
 $ unemployed        : int  2 1 1 1 1 1 1 1 1 1 ...
 $ reason.OLF        : int  NA NA NA 3 3 3 9 9 3 3 ...
 $ sector            : int  NA NA NA NA NA NA 1 1 NA NA ...
 $ occupation        : int  NA NA NA NA NA NA 5 5 NA NA ...
 $ earn.mont         : num  0 0 0 0 0 0 20 20 0 0 ...
 $ earn.ann          : num  0 0 0 0 0 0 240 240 0 0 ...
 $ hours.week        : num  NA NA NA NA NA NA 30 35 NA NA ...
 $ hours.mnt         : num  NA NA NA NA NA ...
 $ fulltime          : int  NA NA NA NA NA NA 1 1 NA NA ...
 $ hhexp             : num  100 100 100 343 343 ...
 $ legacy.pension.amt: num  NA NA NA NA NA NA NA NA NA NA ...
 - attr(*, "datalabel")= chr ""
 - attr(*, "time.stamp")= chr ""
 - attr(*, "formats")= chr  "%9.0g" "%9.0g" "%9.0g" "%9.0g" ...
 - attr(*, "types")= int  100 100 108 108 108 100 108 108 108 100 ...
 - attr(*, "val.labels")= chr  "" "" "location" "region" ...
 - attr(*, "var.labels")= chr  "hhid" "hhweight" "location" "region" ...
 - attr(*, "expansion.fields")=List of 12
  ..$ : chr  "_dta" "_svy_su1" "cluster"
  ..$ : chr  "_dta" "_svy_strata1" "strata"
  ..$ : chr  "_dta" "_svy_stages" "1"
  ..$ : chr  "_dta" "_svy_version" "2"
  ..$ : chr  "_dta" "__XijVarLabcons" "(sum) cons"
  ..$ : chr  "_dta" "ReS_Xij" "cons"
  ..$ : chr  "_dta" "ReS_str" "0"
  ..$ : chr  "_dta" "ReS_j" "group"
  ..$ : chr  "_dta" "ReS_ver" "v.2"
  ..$ : chr  "_dta" "ReS_i" "hhid dur"
  ..$ : chr  "_dta" "note1" "variables g1pc, g2pc, g3pc, g4pc, g5pc, g7pc, g8pc, g9pc, g10pc, g11pc, g12pc,  gall, health, rent, durables we"| __truncated__
  ..$ : chr  "_dta" "note0" "1"
 - attr(*, "version")= int 7
 - attr(*, "label.table")=List of 12
  ..$ location: Named int  1 2
  .. ..- attr(*, "names")= chr  "urban location" "rural location"
  ..$ region  : Named int  1 2 3 4 5 6 7 8 9
  .. ..- attr(*, "names")= chr  "Sofia city" "Bourgass" "Varna" "Lovetch" ...
  ..$ ethnic  : Named int  1 2 3 4
  .. ..- attr(*, "names")= chr  "Bulgaria" "Turks" "Roma" "Other"
  ..$ s2_q2   : Named int  1 2
  .. ..- attr(*, "names")= chr  "male" "female"
  ..$ s2_q3   : Named int  1 2 3 4 5 6 7 8 9
  .. ..- attr(*, "names")= chr  "head                      " "spouse/partner            " "child                     " "son/daughter-in-law       " ...
  ..$ lit     : Named int  1 2
  .. ..- attr(*, "names")= chr  "no" "yes"
  ..$         : Named int  1 2 3 4
  .. ..- attr(*, "names")= chr  "never attanded" "primary" "secondary" "postsecondary"
  ..$         : Named int  1 2
  .. ..- attr(*, "names")= chr  "Not unemployed" "Unemployed"
  ..$         : Named int  1 2 3 4 5 6 7 8 9 10
  .. ..- attr(*, "names")= chr  "student" "housewife/childcare" "in retirement" "illness, disability" ...
  ..$         : Named int  1 2 3 4 5 6 7 8 9 10
  .. ..- attr(*, "names")= chr  "agriculture" "mining" "manufacturing" "utilities" ...
  ..$         : Named int  1 2 3 4 5
  .. ..- attr(*, "names")= chr  "private company" "public works program" "government,public sector, army" "private individual" ...
  ..$         : Named int  1 2
  .. ..- attr(*, "names")= chr  "no" "yes"
```

Subset examples

```r
# subset etnicity = "Bulgaria" and income > 10
> nrow(subset(edu_equal_1,  ethnicity_head == "Bulgaria" & income > 1000))

# subset age > 40 and literate 
> nrow(subset(edu_equal_1, age > 40 & literate == "yes"))
```

Reading SPSS

```r
# foreign is already loaded

# Import international.sav as a data frame: demo
demo <- read.spss("international.sav", to.data.frame = TRUE)

# Create boxplot of gdp variable of demo
boxplot(demo$gdp)
```

Correlation between two variables

```r
> cor(demo$gdp, demo$f_illit)
[1] -0.44768
```

Import as dataframe with value lables

```r
> # foreign is already loaded
> 
> # Import international.sav as demo_1
> demo_1 <- read.spss("international.sav", to.data.frame = TRUE)
> 
> # Print out the head of demo_1
> head(demo_1)
  id              country  contint m_illit f_illit lifeexpt  gdp
1  1 Argentina            Americas     3.0     3.0       16 3375
2  2 Benin                  Africa    45.2    74.5        7  521
3  3 Burundi                Africa    33.2    48.1        5   86
4  4 Chile                Americas     4.2     4.4       14 4523
5  5 Dominican Republic   Americas    12.0    12.7       12 2408
6  6 El Salvador          Americas    17.6    22.9       11 2302
> 
> # Import international.sav as demo_2
> demo_2 <- read.spss("international.sav", to.data.frame = TRUE, use.value.labels = FALSE)
> 
> # Print out the head of demo_2
> head(demo_2)
  id              country contint m_illit f_illit lifeexpt  gdp
1  1 Argentina                  2     3.0     3.0       16 3375
2  2 Benin                      1    45.2    74.5        7  521
3  3 Burundi                    1    33.2    48.1        5   86
4  4 Chile                      2     4.2     4.4       14 4523
5  5 Dominican Republic         2    12.0    12.7       12 2408
6  6 El Salvador                2    17.6    22.9       11 2302
```



